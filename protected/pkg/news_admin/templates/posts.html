{% extends 'base.html' %}
{% import 'forms.html' as forms %}

{% block title %}Admin - News posts{% endblock %}

{% block contents %}

    {% call forms.form("", method="POST", value="Submit") %}
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>Title</th>
                    <th>Published</th>
                    <th>Last modified</th>
                </tr>
            </thead>
            <tbody>
            {% for post in posts %}
                <tr>
                    <td>{{ forms.input('post_id', type="checkbox", value=post.id) }}</td>
                    <td><a href="/posts/{{ post.id }}">{{ post.title }}</a></td>
                    <td>{% if post.published %}{{ post.published|datetime }}{% else %}Not Published{% endif %}</td>
                    <td>{% if post.last_modified %}{{ post.last_modified|datetime }}{% endif %}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% if select_to_many_error %}
            <p class="error">Can only perform this action on one post at a time</p>
        {% elif select_none_error %}
            <p class="error">You have to check at least one box for this action</p>
        {% endif %}
        <select name="action">
            <option value="edit">Edit post</option>
            <option value="delete">Delete posts</option>
            <option value="publish">Publish post</option>
            <option value="unpublish">Unpublish post</option>
        </select>
    {% endcall %}
{% endblock %}
